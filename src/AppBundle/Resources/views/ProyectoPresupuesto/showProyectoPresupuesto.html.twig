{% extends '::base.html.twig' %}

{% block link %}
    <li><a href="{{path('homepage')}}"><i class="fa fa-link"></i>Dashboard</a></li>
       <li><a href="{{path('proyectopresupuesto')}}"><i class="fa fa-link"></i>Listado Presupuestos</a></li>
    <li class="active"></i>Mostrar presupuesto</li>
{% endblock %}

{% block title %}
    Mostrar Presupuesto
{% endblock %}

{% block javascripts %}
    <script src="{{asset('js/confirm-dialog.js')}}"></script>
{% endblock %}

{% block javascriptDataTables %}

    <script src = {{asset('js/dataTablesInit.js')}}>
    </script>
{% endblock %}


{% block body %}
    <h1>Proyecto Presupuesto</h1>

    <table class="table table-striped table-hover">
        <tbody>
            <tr>
                <th>Nombre Proyecto presupuesto</th>
                <td>{{ entity.nombrePresupuesto }}</td>
            </tr>
            <tr>
                <th>Honorarios</th>
                <td>{{ entity.honorarios }}</td>
            </tr>
            <tr>
                <th>Estado</th>
                <td>{{ entity.estado }}</td>
            </tr>
            {% set contador = 0 %}
            {% for presupuesto in entity.presupuestoIndividual %}
             <tr>
                <th>CÃ³digo Presupuesto Asociado</th>
                <td>{{ presupuesto }}    <button type="button" class="btn btn-xs btn-info" data-toggle="modal" data-target="#modalProyectoPresupuesto{{contador}}">
               Mostrar presupuesto
              </button>
                </td>
            </tr>
            {% set contador = contador + 1 %}
           {% endfor %}
        </tbody>
    </table>

    <div class="row">
       {% if is_granted('ROLE_ELIMINAR_PRESUPUESTOS') and entity.estado != 'FINALIZADO' %}
        <div class="cols-xs-12 col-sm-12 col-md-6">
            <a  class="btn btn-primary btn-block" href="{{ path('proyectopresupuesto_state', { 'id': entity.id }) }}">Marcar Finalizado</a>
        </div>
        {% endif %}
         {% if is_granted('ROLE_EDITAR_PRESUPUESTO') and entity.estado != 'FINALIZADO' %}
        <div class="col-xs-12 col-sm-12 col-md-6">
            <a class="btn btn-warning btn-block" href="{{ path('proyectopresupuesto_edit', { 'id': entity.id }) }}">
                Editar
            </a>
        </div>
         {% endif %}
    </div>

{% set contador = 0 %}
{% for presupuesto in entity.presupuestoIndividual %}
    {% include 'AppBundle:ProyectoPresupuesto:modal_showProyectoPresupuesto.html.twig' %}
    {% set contador = contador + 1 %}
{% endfor %}
{% endblock %}
