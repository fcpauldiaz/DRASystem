{% extends '::base.html.twig' %}

{% block body -%}
	<br>
    <h1>Editar Tipo Puesto</h1>

   
    {{ form_start(edit_form) }}
        {{form_row(edit_form.nombrePuesto) }}
        {{form_row(edit_form.descripcion) }}
        
       {% set array_length = (edit_form.permisos.vars.choices) | length %}
       {% set middle = (array_length / 2) |round(0, 'ceil') %}
      <div class="row">
        <div class="col-sm-6 col-md-6">
          <div class="form-group">
                <h2>Permisos</h2>
                 {% for i in 1..middle %}
                  {{ form_row(edit_form.permisos[i]) }}
                {% endfor %}
             
               

          </div>
        </div>
       
        <div class="col-sm-6 col-md-6">
          <div class="form-group">
              <h2>Permisos</h2>
               {% for i in middle..array_length %}
                  {{ form_row(edit_form.permisos[i]) }}
                {% endfor %}
          </div>
        </div>
      </div>
        
    {{ form_end(edit_form) }}

        <ul class="record_actions">
    <li>
        <a class="btn btn-default" href="{{ path('tipopuesto') }}">
           Ver todos los tipos puestos
        </a>
    </li>
    {% if is_granted('ROLE_ELIMINAR_TIPO_PUESTO') %}
     <li>
      <button id="simple-confirm" class="btn btn-danger">Eliminar</button> 
    </li>
    {% endif %}
  </ul>

    
  <div class="modal">
      <div class="dialog confirm">
      <h1>Confirmación de eliminación</h1>
      <div class="msg"></div>
      <div class="form-group toolbar">
        <button class="btn btn-default cancel" type="button" data-default="Cancel">Cancelar</button>
        <button class="btn btn-danger ok" type="submit" data-default="OK">Eliminar</button>
      </div>
    </div>
    <div class="dialog alert">
    <h1>Alerta</h1>
      <div class="msg"></div>
      <div class="form-group toolbar">
        <button class="btn btn-primary cancel" type="submit">OK</button>
      </div>
    </div>
    {{form(delete_form)}}
</div>
      


{% endblock %}
{% block javascripts %}
  <script src="{{asset('js/tipo_puesto_management.js')}}"></script>
<script>

/*
 * When ready add click behavior to the buttons.
 */
$(document).ready(function () {
 

  $("#simple-confirm").click(function (event) {
    event.stopPropagation();
    var message = `
    ¿Seguro que desea eliminar el tipo del puesto?
    Los puestos relacionados también serán eliminados para garantizar la integridad de la información.
    `
    options = {
      ok: "Sí, deseo eliminar la información",
      cancel: "Cancelar"
    }
    $.dialog.confirm(message, options).onClose(function (response) {
      if (response) {
        $.dialog.alert("Se ha eliminado el tipo puesto").autoClose(2000);
        document.form.submit();
      } else {
        $.dialog.alert("Se ha cancelado la operación").autoClose(2000);
      }
    });
  });

  
});

</script>
{% endblock %}