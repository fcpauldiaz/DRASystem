{% extends '::base.html.twig' %}

{% block stylesheets %}
   
    {{ form_stylesheet(form) }}
{% endblock %}

{% block javascripts %}
    {{ form_javascript(form) }}
   <script src="{{asset('js/showHideElements.js')}}"></script>
   <script src="{{asset('js/dateModifier.js')}}"></script>
{% endblock %}
{% block body -%}
	<br>
	{{ form(form)}}
    <br>
    <h1>Consulta Proyecto Presupuesto {{nombrePresupuesto}}</h1>
   
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Actividad</th>
                <th>Cliente</th>
                <th>Costo</th>
                <th>Presupuesto</th>
                <th>Diferencia</th>
                <th>Acci√≥n</th>
            </tr>
        </thead>
        <tbody>
        {% set contador = 0 %}
        {% for presupuesto in proyecto %}
        	{% set horaPresupuestada = presupuesto.horasPresupuestadas %}
			{% set horaPorActividad = horasSubTotal[contador] %}
			{% set diferencia = diferenciaSubTotal[contador] %}

            <tr>
                <td>{{presupuesto.actividad}}</td>
                <td>{{presupuesto.cliente}}</td>
                <td>{{horaPorActividad}}</td>
                <td>{{horaPresupuestada}}</td>
                {% if diferencia < 0 %}
                	<td><font color="red"><b>{{diferencia}}<b></font></td>
                {% else %}
                	 <td><b>{{ diferencia }}<b></td>
                {% endif %}
                <td>
                	<a  href="{{ path('presupuesto_individual', { 'id': presupuesto.id }) }}" class="btn btn-xs btn-info">Mostrar detalle</a>
                </td>
            </tr>
            {% set contador = contador + 1 %}
        {% endfor %}
        {% if horasPresupuestadasTotal is defined %}
         <tr>
                <td> <b>Totales<b> </td>
                <td></td>
                <td><b>{{horasTotal}}<b></td>
                <td><b>{{horasPresupuestadasTotal}}<b></td>
                {% if diferenciaTotal < 0 %}
                	<td><font color="red"><b>{{diferenciaTotal}}<b></font></td>
                {% else %}
                	 <td><b>{{diferenciaTotal}}<b></td>
                {% endif %}
               
                <td></td>
            </tr>
        {% endif %}

        </tbody>
    </table>
      {% if horasPresupuestadasTotal is defined %}

        <button type="button" class="btn btn-xs btn-info" data-toggle="modal" data-target="#modalCosto">Calcular costos en unidades monetarias</button>
   
    {% endif %}

      <br>
      <br>
    {% include 'CostoBundle:Costo:modal_costo.html.twig' %}
    {% endblock %}
