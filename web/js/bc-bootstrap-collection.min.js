!function(a){"use strict";var b='[data-addfield="collection"]',c='[data-removefield="collection"]',d=function(c){a(c).on("click",b,this.addField)},e=function(b){a(b).on("click",c,this.removeField)};d.prototype.addField=function(b){var c=a(this),d=c.attr("data-collection"),e=c.attr("data-prototype-name");b&&b.preventDefault();for(var f=a("#"+d),g=f.find("> ul"),h=g.find("> li").length,i=f.attr("data-prototype"),j=i.match(/id="(.*?)"/),k=new RegExp(e,"g");a("#"+j[1].replace(k,h)).length>0;)h++;i=i.replace(k,h),i=i.replace(/__id__/g,j[1].replace(k,h));var l=a("<li></li>").html(i);l.appendTo(g),c.trigger("bc-collection-field-added")},e.prototype.removeField=function(b){var c=a(this),d=(c.attr("data-field"),c.closest("li").parent());b&&b.preventDefault(),c.trigger("bc-collection-field-removed"),c.trigger("bc-collection-field-removed-before");c.closest("li").remove();d.trigger("bc-collection-field-removed-after")};var f=a.fn.addField,g=a.fn.removeField;a.fn.addField=function(b){return this.each(function(){var c=a(this),e=c.data("addfield");e||c.data("addfield",e=new d(this)),"string"==typeof b&&e[b].call(c)})},a.fn.removeField=function(b){return this.each(function(){var c=a(this),d=c.data("removefield");d||c.data("removefield",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.addField.Constructor=d,a.fn.removeField.Constructor=e,a.fn.addField.noConflict=function(){return a.fn.addField=f,this},a.fn.removeField.noConflict=function(){return a.fn.removeField=g,this},a(document).on("click.addfield.data-api",b,d.prototype.addField),a(document).on("click.removefield.data-api",c,e.prototype.removeField)}(window.jQuery);